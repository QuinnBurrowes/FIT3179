<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Australian Health and Wellbeing Visualisations</title>
  <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 40px;
      background: #fafafa;
    }
    h2 {
      text-align: center;
      margin-top: 60px;
      color: #333;
    }
    .section {
      margin-bottom: 70px;
    }
    .chart-row {
      display: flex;
      justify-content: center;
      align-items: flex-start;
      gap: 70px;
      flex-wrap: wrap;
      margin-top: 20px;
    }
    .chart {
      background: white;
      padding: 10px;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    .text-block {
      max-width: 1000px;
      margin: 25px auto;
      font-size: 16px;
      color: #444;
      line-height: 1.6;
      text-align: center;
    }
  </style>
</head>
<body>

  <!-- SECTION 1 -->
  <div class="section">
    <h2>National Overview: Physical & Mental Health by State</h2>
    <div class="chart-row">
      <div id="mentalMap" class="chart"></div>
      <div id="physicalMap" class="chart"></div>
    </div>

    <div class="text-block">
      These maps show the proportion of adults meeting recommended physical activity and mental wellbeing guidelines across Australian states.
      Clear regional disparities emerge, indicating the need for targeted health initiatives.
    </div>

    <div id="deathCauses" class="chart" style="display: block; margin: 0 auto; width: 800px;"></div>
  </div>

  <!-- SECTION 2 -->
  <div class="section">
    <h2>Lifestyle Behaviours by Age</h2>
    <div class="chart-row">
      <div id="donutChart" class="chart"></div>
      <div id="heatmap" class="chart"></div>
    </div>

    <div class="text-block">
      These charts highlight differences in diet and activity across age groups.  
      Younger groups are less likely to meet fruit and vegetable intake recommendations, while physical activity decreases steadily with age.
    </div>
  </div>

  <!-- SECTION 3 -->
  <div class="section">
    <h2>Psychological Wellbeing and Physical Activity</h2>
    <div class="chart-row">
      <div id="scatter" class="chart"></div>
      <div id="stacked" class="chart"></div>
    </div>

    <div class="text-block">
      Higher physical activity levels are generally linked to lower psychological distress.  
      However, this relationship varies across age groups, suggesting the importance of age-specific mental health support strategies.
    </div>
  </div>

  <script>
    // --- SECTION 1 MAPS ---
    const mentalMap = {
      "$schema":"https://vega.github.io/schema/vega-lite/v5.json",
      "width": 680,
      "height": 420,
      "projection": {"type":"mercator","center":[134,-28],"scale":600},
      "layer":[
        {"data":{"graticule":{"step":[30,30]}}, "mark":{"type":"geoshape","stroke":"#ddd","strokeWidth":0.4}},
        {
          "data":{"url":"https://raw.githubusercontent.com/tonywr71/GeoJson-Data/master/australian-states.json","format":{"type":"json","property":"features"}},
          "transform":[{
            "lookup":"properties.STATE_NAME",
            "from":{"data":{"url":"https://raw.githubusercontent.com/QuinnBurrowes/FIT3179/main/mental_state_real.csv"},"key":"STATE_NAME","fields":["value"]}
          }],
          "mark":{"type":"geoshape","stroke":"white","strokeWidth":1},
          "encoding":{
            "color":{"field":"value","type":"quantitative","title":"% adults meeting mental wellbeing guidelines","scale":{"scheme":"blues"}},
            "tooltip":[{"field":"properties.STATE_NAME","title":"State"},{"field":"value","title":"% meeting guidelines"}]
          }
        }
      ],
      "config":{"legend":{"orient":"left"},"view":{"stroke":"transparent"}}
    };

    const physicalMap = {
      "$schema":"https://vega.github.io/schema/vega-lite/v5.json",
      "width": 680,
      "height": 420,
      "projection": {"type":"mercator","center":[134,-28],"scale":600},
      "layer":[
        {"data":{"graticule":{"step":[30,30]}}, "mark":{"type":"geoshape","stroke":"#ddd","strokeWidth":0.4}},
        {
          "data":{"url":"https://raw.githubusercontent.com/tonywr71/GeoJson-Data/master/australian-states.json","format":{"type":"json","property":"features"}},
          "transform":[{
            "lookup":"properties.STATE_NAME",
            "from":{"data":{"url":"https://raw.githubusercontent.com/QuinnBurrowes/FIT3179/main/physical_state.csv"},"key":"STATE_NAME","fields":["value"]}
          }],
          "mark":{"type":"geoshape","stroke":"white","strokeWidth":1},
          "encoding":{
            "color":{"field":"value","type":"quantitative","title":"% adults meeting physical activity guidelines","scale":{"scheme":"greens"}},
            "tooltip":[{"field":"properties.STATE_NAME","title":"State"},{"field":"value","title":"% meeting guidelines"}]
          }
        }
      ],
      "config":{"view":{"stroke":"transparent"}}
    };

    const deathCauses = {
      "$schema":"https://vega.github.io/schema/vega-lite/v5.json",
      "width": 800,
      "height": 380,
      "data":{"url":"https://raw.githubusercontent.com/QuinnBurrowes/FIT3179/main/death_causes_old.csv"},
      "mark":{"type":"line","point":true,"strokeWidth":3},
      "encoding":{
        "x":{"field":"Year","type":"temporal","axis":{"title":"Year"}},
        "y":{"field":"Deaths","type":"quantitative","axis":{"title":"Number of deaths"}},
        "color":{"field":"Cause","type":"nominal"},
        "tooltip":[{"field":"Year"},{"field":"Cause"},{"field":"Deaths"}]
      },
      "config":{"view":{"stroke":"transparent"}}
    };

    // --- SECTION 2 ---
    const donutChart = {
      "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
      "description": "Interactive donut chart showing weekly physical activity distribution by age group.",
      "title": "Weekly Physical Activity Levels by Age Group (2022)",
      "data": {"url": "https://raw.githubusercontent.com/QuinnBurrowes/FIT3179/main/physical_activity_final.csv","format": {"type": "csv"}},
      "params": [{"name": "ageSelect","value": "15-17","bind": {"input": "select","options": ["15-17","18-24","25-34","35-44","45-54","55-64","65+"],"name": "Select Age Group: "}}],
      "transform": [{"filter": "datum.Age_Group == ageSelect"}],
      "width": 360,
      "height": 320,
      "mark": {"type": "arc", "innerRadius": 70},
      "encoding": {
        "theta": {"field": "Proportion", "type": "quantitative"},
        "color": {
          "field": "Minutes_Category",
          "type": "nominal",
          "scale": {"domain": ["0 minutes","1-149 minutes","150-299 minutes","300+ minutes"],"range": ["#d73027","#fc8d59","#fee090","#1a9850"]},
          "legend": {"title": "Minutes per Week"}
        },
        "order": {"field": "Minutes_Category","type": "nominal","sort": ["0 minutes","1-149 minutes","150-299 minutes","300+ minutes"]},
        "tooltip": [{"field": "Age_Group","title": "Age Group"},{"field": "Minutes_Category","title": "Minutes per Week"},{"field": "Proportion","title": "Proportion (%)"}]
      },
      "config": {"legend": {"orient": "right"}}
    };

    const heatmap = {
      "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
      "title": "Proportion Meeting Dietary Recommendations by Age Group (2022)",
      "data": {"url": "https://raw.githubusercontent.com/QuinnBurrowes/FIT3179/main/fruit_veg_data.csv","format": {"type": "csv"}},
      "width": 400,
      "height": 240,
      "mark": "rect",
      "encoding": {
        "x": {"field": "AgeGroup","type": "ordinal","sort": ["18-24","25-34","35-44","45-54","55-64","65-74","75 years and over"],"axis": {"title": "Age Group"}},
        "y": {"field": "RecommendationType","type": "nominal","sort": ["Fruit","Vegetable","Both"],"axis": {"title": "Recommendation Type"}},
        "color": {"field": "MetPercent","type": "quantitative","title": "Percent meeting recommendation (%)","scale": {"scheme": "yellowgreenblue"}},
        "tooltip": [{"field": "AgeGroup","type": "nominal"},{"field": "RecommendationType","type": "nominal"},{"field": "MetPercent","type": "quantitative","title": "Percent (%)"}]
      }
    };

    // --- SECTION 3 ---
    const scatter = {
      "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
      "title": "Relationship Between Physical Activity and Psychological Distress by Age Group",
      "data": {"url": "https://raw.githubusercontent.com/QuinnBurrowes/FIT3179/main/activity_vs_distress.csv"},
      "mark": {"type": "circle", "size": 120, "opacity": 0.8},
      "encoding": {
        "x": {"field": "Physical Activity (%)", "type": "quantitative"},
        "y": {"field": "Psychological Distress (%)", "type": "quantitative"},
        "color": {"field": "Age Group", "type": "nominal"},
        "tooltip": [
          {"field": "Age Group"},
          {"field": "Physical Activity (%)"},
          {"field": "Psychological Distress (%)"}
        ]
      },
      "width": 400,
      "height": 320
    };

    const stacked = {
      "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
      "title": "Levels of Psychological Distress by Age Group",
      "data": {"url": "https://raw.githubusercontent.com/QuinnBurrowes/FIT3179/main/distress_stacked.csv"},
      "mark": "bar",
      "width": 400,
      "height": 320,
      "encoding": {
        "x": {"field": "Age Group", "type": "ordinal"},
        "y": {"field": "Proportion", "type": "quantitative", "stack": "normalize", "title": "Proportion"},
        "color": {"field": "Distress Level", "type": "nominal"},
        "tooltip": [{"field": "Age Group"},{"field": "Distress Level"},{"field": "Proportion"}]
      }
    };

    // Embed charts
    vegaEmbed("#mentalMap", mentalMap);
    vegaEmbed("#physicalMap", physicalMap);
    vegaEmbed("#deathCauses", deathCauses);
    vegaEmbed("#donutChart", donutChart);
    vegaEmbed("#heatmap", heatmap);
    vegaEmbed("#scatter", scatter);
    vegaEmbed("#stacked", stacked);
  </script>

</body>
</html>
