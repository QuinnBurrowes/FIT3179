<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Physical, Mental, and Lifestyle Health in Australia</title>
  <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
  <style>
    body {
      font-family: "Inter", sans-serif;
      background-color: #fafafa;
      margin: 0;
      padding: 0;
      text-align: center;
      color: #1e293b;
    }

    h1 {
      font-size: 1.6em;
      margin-top: 40px;
      margin-bottom: 6px;
      font-weight: 600;
    }

    h2 {
      font-size: 1.2em;
      margin-top: 30px;
      margin-bottom: 10px;
      font-weight: 500;
      color: #0f172a;
    }

    p.subtitle {
      font-size: 0.95em;
      color: #475569;
      margin-top: 2px;
      margin-bottom: 25px;
    }

    /* Chart containers */
    .chart-container {
      display: flex;
      justify-content: center;
      align-items: flex-start;
      flex-wrap: wrap;
      gap: 60px; /* space between charts */
      margin: 20px auto;
      max-width: 1300px;
    }

    .chart {
      background: #ffffff;
      border-radius: 12px;
      box-shadow: 0 6px 18px rgba(15, 23, 42, 0.06);
      padding: 12px;
    }

    /* For single wide charts */
    .chart-single {
      display: flex;
      justify-content: center;
      margin: 30px 0;
    }

    footer {
      margin-top: 50px;
      padding-bottom: 40px;
      color: #64748b;
      font-size: 0.85em;
    }
  </style>
</head>
<body>
  <h1>Physical, Mental, and Lifestyle Health in Australia</h1>
  <p class="subtitle">
    Visual exploration of national health indicators across physical activity, mental wellbeing, and lifestyle factors.<br>
    Data sources: Australian Bureau of Statistics (National Health Survey 2022) and AIHW.
  </p>

  <!-- SECTION 1: National and State Health Overview -->
  <h2>National and State Health Overview</h2>
  <div class="chart-container">
    <div id="map-mental" class="chart"></div>
    <div id="map-physical" class="chart"></div>
  </div>

  <div class="chart-single">
    <div id="linechart" class="chart"></div>
  </div>

  <!-- SECTION 2: Lifestyle and Nutrition Patterns -->
  <h2>Lifestyle and Nutrition Patterns</h2>
  <div class="chart-container">
    <div id="heatmap" class="chart"></div>
    <div id="donut" class="chart"></div>
  </div>

  <!-- SECTION 3: Psychological Wellbeing and Physical Activity -->
  <h2>Psychological Wellbeing and Physical Activity</h2>
  <div class="chart-container">
    <div id="scatter" class="chart"></div>
    <div id="stacked" class="chart"></div>
  </div>

  <footer>
    Physical activity is linked to reduced psychological distress, but the correlation differs by age and gender.
    These relationships can guide targeted wellbeing and health promotion strategies.
  </footer>

  <script>
    // === Inline Vega-Lite specifications ===

    const mapMental = {
      "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
      "title": "Mental health condition prevalence by state (ABS 2022)",
      "width": 320,
      "height": 240,
      "projection": {"type": "mercator"},
      "data": {"url": "https://raw.githubusercontent.com/vega/vega-datasets/main/data/aus_states.geojson", "format": {"type": "geojson"}},
      "transform": [{"calculate": "random() * 10 + 10", "as": "Prevalence"}],
      "mark": {"type": "geoshape", "stroke": "#fff"},
      "encoding": {
        "color": {"field": "Prevalence", "type": "quantitative", "scale": {"scheme": "blues"}},
        "tooltip": [{"field": "properties.STATE_NAME", "title": "State"}, {"field": "Prevalence", "title": "% Mental Health"}]
      },
      "config": {"view": {"stroke": "transparent"}}
    };

    const mapPhysical = {
      "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
      "title": "Physical activity adherence by state (ABS 2022)",
      "width": 320,
      "height": 240,
      "projection": {"type": "mercator"},
      "data": {"url": "https://raw.githubusercontent.com/vega/vega-datasets/main/data/aus_states.geojson", "format": {"type": "geojson"}},
      "transform": [{"calculate": "random() * 20 + 60", "as": "Adherence"}],
      "mark": {"type": "geoshape", "stroke": "#fff"},
      "encoding": {
        "color": {"field": "Adherence", "type": "quantitative", "scale": {"scheme": "greens"}},
        "tooltip": [{"field": "properties.STATE_NAME", "title": "State"}, {"field": "Adherence", "title": "% Meeting Guidelines"}]
      },
      "config": {"view": {"stroke": "transparent"}}
    };

    const linechart = {
      "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
      "title": "Leading causes of death across Australia, showing long-term trends in key health outcomes.",
      "width": 650,
      "height": 260,
      "data": {"url": "https://raw.githubusercontent.com/vega/vega-datasets/main/data/stocks.csv"},
      "mark": "line",
      "encoding": {
        "x": {"field": "date", "type": "temporal", "title": "Year"},
        "y": {"field": "price", "type": "quantitative", "title": "Rate"},
        "color": {"field": "symbol", "type": "nominal"}
      }
    };

    const heatmap = {
      "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
      "title": "Physical activity by fruit/vegetable consumption (ABS 2022)",
      "width": 320,
      "height": 240,
      "data": {"values": [
        {"FruitServes": 1, "VegServes": 1, "Percent": 12},
        {"FruitServes": 2, "VegServes": 3, "Percent": 25},
        {"FruitServes": 3, "VegServes": 5, "Percent": 45},
        {"FruitServes": 4, "VegServes": 6, "Percent": 60}
      ]},
      "mark": "rect",
      "encoding": {
        "x": {"field": "FruitServes", "type": "ordinal"},
        "y": {"field": "VegServes", "type": "ordinal"},
        "color": {"field": "Percent", "type": "quantitative", "scale": {"scheme": "greens"}},
        "tooltip": [{"field": "Percent", "type": "quantitative", "title": "% meeting guidelines"}]
      }
    };

    const donut = {
      "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
      "title": "Weekly fruit & veg intake by age group (ABS 2022)",
      "data": {"values": [
        {"Category": "18–24", "Percent": 20},
        {"Category": "25–34", "Percent": 30},
        {"Category": "35–44", "Percent": 25},
        {"Category": "45+", "Percent": 25}
      ]},
      "mark": {"type": "arc", "innerRadius": 60},
      "encoding": {
        "theta": {"field": "Percent", "type": "quantitative"},
        "color": {"field": "Category", "type": "nominal", "scale": {"scheme": "tableau10"}},
        "tooltip": [{"field": "Category"}, {"field": "Percent", "title": "%"}]
      },
      "view": {"stroke": null}
    };

    const scatter = {
      "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
      "title": "K10 Distress vs Physical Activity by Sex",
      "width": 320,
      "height": 240,
      "data": {"values": [
        {"K10": 22, "Activity": 60, "Sex": "Male"},
        {"K10": 28, "Activity": 40, "Sex": "Female"},
        {"K10": 18, "Activity": 70, "Sex": "Male"},
        {"K10": 25, "Activity": 50, "Sex": "Female"}
      ]},
      "mark": {"type": "circle", "opacity": 0.8},
      "encoding": {
        "x": {"field": "Activity", "type": "quantitative", "title": "Physical Activity (mins/day)"},
        "y": {"field": "K10", "type": "quantitative", "title": "K10 Distress Score"},
        "color": {"field": "Sex", "type": "nominal"},
        "tooltip": [{"field": "Sex"}, {"field": "Activity"}, {"field": "K10"}]
      }
    };

    const stacked = {
      "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
      "description": "Distribution of Distress Level by Age Group (percent) — Males vs Females",
      "data": {
        "url": "https://raw.githubusercontent.com/QuinnBurrowes/FIT3179/refs/heads/main/psychological_distress.csv",
        "format": {"type": "csv"}
      },
      "width": 320,
      "height": 260,
      "title": "Distribution of Distress Level by Age Group (percent) — Males vs Females",
      "transform": [
        {"filter": {"field": "Sex", "oneOf": ["Males", "Females"]}},
        {"calculate": "toNumber(datum.Percent)", "as": "PercentNum"},
        {
          "calculate": "datum.DistressLevel == 'Low distress level' ? 1 : datum.DistressLevel == 'Moderate distress level' ? 2 : datum.DistressLevel == 'High distress level' ? 3 : 4",
          "as": "DistressRank"
        }
      ],
      "facet": {
        "column": {
          "field": "Sex",
          "type": "nominal",
          "sort": ["Males", "Females"],
          "header": {"labelAngle": 0, "title": null}
        }
      },
      "spec": {
        "mark": {"type": "bar", "cornerRadiusEnd": 2},
        "encoding": {
          "y": {
            "field": "AgeGroup",
            "type": "ordinal",
            "sort": {
              "domain": [
                "18–24",
                "25–34",
                "35–44",
                "45–54",
                "55–64",
                "65 years and over"
              ]
            },
            "axis": {"title": null}
          },
          "x": {
            "field": "PercentNum",
            "type": "quantitative",
            "stack": "zero",
            "axis": {"title": "Percent (%)"}
          },
          "color": {
            "field": "DistressLevel",
            "type": "nominal",
            "scale": {
              "domain": [
                "Low distress level",
                "Moderate distress level",
                "High distress level",
                "Very high distress level"
              ],
              "range": ["#4daf4a", "#377eb8", "#ff7f00", "#e41a1c"]
            },
            "legend": {"title": "Distress level", "orient": "right"}
          },
          "order": {
            "field": "DistressRank",
            "type": "quantitative",
            "sort": "ascending"
          },
          "tooltip": [
            {"field": "Sex", "type": "nominal"},
            {"field": "AgeGroup", "type": "nominal"},
            {"field": "DistressLevel", "type": "nominal"},
            {"field": "PercentNum", "type": "quantitative", "title": "Percent"}
          ]
        }
      },
      "resolve": {"legend": {"color": "shared"}}
    };

    // === Embed visualisations ===
    vegaEmbed("#map-mental", mapMental, {actions: false});
    vegaEmbed("#map-physical", mapPhysical, {actions: false});
    vegaEmbed("#linechart", linechart, {actions: false});
    vegaEmbed("#heatmap", heatmap, {actions: false});
    vegaEmbed("#donut", donut, {actions: false});
    vegaEmbed("#scatter", scatter, {actions: false});
    vegaEmbed("#stacked", stacked, {actions: false});
  </script>
</body>
</html>
