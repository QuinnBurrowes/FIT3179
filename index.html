<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Australian Health Insights Dashboard</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
  <style>
    body {
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: #fafafa;
      margin: 18px;
      color: #111827;
      line-height: 1.55;
    }

    h1, h2 {
      text-align: center;
      font-weight: 600;
    }

    h1 { margin-bottom: 8px; }
    h2 { margin-top: 40px; margin-bottom: 12px; }

    p.lead {
      text-align: center;
      color: #374151;
      max-width: 800px;
      margin: 0 auto 24px auto;
    }

    /* SECTION 1: maps */
    .top-row {
      display: flex;
      justify-content: center;
      align-items: flex-start;
      gap: 64px;
      flex-wrap: wrap;
      margin-bottom: 18px;
    }

    .map-card, .chart-card, .chart {
      background: #fff;
      border-radius: 8px;
      box-shadow: 0 6px 18px rgba(15,23,42,0.06);
      padding: 12px;
      box-sizing: border-box;
    }

    .map-card { width: 680px; }
    .chart-card {
      width: calc(100% - 36px);
      max-width: 1380px;
      margin: 12px auto;
    }

    /* SECTION 2 */
    .section-2 {
      display: flex;
      justify-content: center;
      align-items: flex-start;
      gap: 480px; /* wider spacing between charts */
      flex-wrap: wrap;
      width: 100%;
      max-width: 1380px;
      margin: 0 auto 20px auto;
    }

    /* SECTION 3 */
    .chart-row {
      display: flex;
      justify-content: center;
      align-items: flex-start;
      gap: 480px; /* wider spacing between charts */
      flex-wrap: wrap;
      margin-top: 20px;
      margin-bottom: 20px;
    }

    .chart { width: 420px; max-width: 100%; }

    .caption, .text-block {
      margin-top: 8px;
      font-size: 14px;
      color: #374151;
      text-align: center;
      max-width: 1000px;
      margin-left: auto;
      margin-right: auto;
    }

    @media (max-width: 1450px) {
      .section-2, .chart-row { gap: 220px; }
    }

    @media (max-width: 900px) {
      .section-2, .chart-row { gap: 80px; }
      .chart { width: 100%; }
    }
  </style>
</head>
<body>
  <header>
    <h1>Physical, Mental, and Lifestyle Health in Australia</h1>
    <p class="lead">
      Visual exploration of national health indicators across physical activity, mental wellbeing, and lifestyle factors.
      <br>Data sources: Australian Bureau of Statistics (National Health Survey 2022) and AIHW.
    </p>
  </header>

  <!-- SECTION 1 -->
  <h2>National and State Health Overview</h2>
  <div class="top-row">
    <div class="map-card">
      <div id="map1"></div>
      <div class="caption">Mental health conditions prevalence by state (ABS 2022)</div>
    </div>
    <div class="map-card">
      <div id="map2"></div>
      <div class="caption">Physical activity guideline adherence by state (ABS 2022)</div>
    </div>
  </div>

  <div class="text-block">
    The maps highlight regional disparities in physical and mental health across Australia. 
    States with higher physical activity rates tend to report lower mental health concerns, indicating a possible association.
  </div>

  <div class="chart-card">
    <div id="deaths"></div>
    <div class="caption">Leading causes of death across Australia, showing long-term trends in key health outcomes.</div>
  </div>

  <!-- SECTION 2 -->
  <h2>Lifestyle and Nutrition Patterns</h2>
  <div class="section-2">
    <div id="heatmap" class="chart"></div>
    <div id="donut" class="chart"></div>
  </div>

  <div class="text-block">
    Diet and physical activity play central roles in population health.  
    Younger age groups are less likely to meet fruit and vegetable recommendations, while activity levels vary strongly with age.
  </div>

  <!-- SECTION 3 -->
  <h2>Psychological Wellbeing and Physical Activity</h2>
  <div class="chart-row">
    <div id="scatter" class="chart"></div>
    <div id="stacked" class="chart"></div>
  </div>

  <div class="text-block">
    Physical activity is linked to reduced psychological distress, but this connection differs by age and gender.  
    These relationships can guide targeted wellbeing and health promotion strategies.
  </div>

  <script>
    const embedOpts = { actions: false, renderer: "canvas" };

    /* MAP 1 - Mental health */
    const specMap1 = {
      "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
      "width": 680, "height": 420,
      "projection": { "type": "mercator", "center": [134, -28], "scale": 600 },
      "layer": [
        { "data": { "graticule": { "step": [30, 30] } }, "mark": { "type": "geoshape", "stroke": "#ddd", "strokeWidth": 0.4 } },
        {
          "data": { "url": "https://raw.githubusercontent.com/tonywr71/GeoJson-Data/master/australian-states.json", "format": { "type": "json", "property": "features" } },
          "transform": [
            {
              "lookup": "properties.STATE_NAME",
              "from": {
                "data": { "url": "https://raw.githubusercontent.com/QuinnBurrowes/FIT3179/main/mental_state_real.csv" },
                "key": "STATE_NAME",
                "fields": ["value"]
              }
            }
          ],
          "mark": { "type": "geoshape", "stroke": "white", "strokeWidth": 1 },
          "encoding": {
            "color": { "field": "value", "type": "quantitative", "title": "% adults (mental)", "scale": { "scheme": "blues" } },
            "tooltip": [
              { "field": "properties.STATE_NAME", "title": "State" },
              { "field": "value", "title": "% adults (mental)" }
            ]
          }
        }
      ],
      "config": { "legend": { "orient": "left", "offset": 10 }, "view": { "stroke": "transparent" } }
    };

    /* MAP 2 - Physical health */
    const specMap2 = {
      "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
      "width": 680, "height": 420,
      "projection": { "type": "mercator", "center": [134, -28], "scale": 600 },
      "layer": [
        { "data": { "graticule": { "step": [30, 30] } }, "mark": { "type": "geoshape", "stroke": "#ddd", "strokeWidth": 0.4 } },
        {
          "data": { "url": "https://raw.githubusercontent.com/tonywr71/GeoJson-Data/master/australian-states.json", "format": { "type": "json", "property": "features" } },
          "transform": [
            {
              "lookup": "properties.STATE_NAME",
              "from": {
                "data": { "url": "https://raw.githubusercontent.com/QuinnBurrowes/FIT3179/main/physical_state.csv" },
                "key": "STATE_NAME",
                "fields": ["value"]
              }
            }
          ],
          "mark": { "type": "geoshape", "stroke": "white", "strokeWidth": 1 },
          "encoding": {
            "color": { "field": "value", "type": "quantitative", "title": "% adults (physical)", "scale": { "scheme": "greens" } },
            "tooltip": [
              { "field": "properties.STATE_NAME", "title": "State" },
              { "field": "value", "title": "% adults (physical)" }
            ]
          }
        }
      ],
      "config": { "legend": { "orient": "left", "offset": 10 }, "view": { "stroke": "transparent" } }
    };

    /* DEATHS */
    const specDeaths = {
      "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
      "data": { "url": "https://raw.githubusercontent.com/QuinnBurrowes/FIT3179/main/deaths.csv" },
      "mark": "line",
      "encoding": {
        "x": { "field": "Year", "type": "temporal" },
        "y": { "field": "Deaths", "type": "quantitative" },
        "color": { "field": "Cause", "type": "nominal" }
      },
      "width": 1000, "height": 380
    };

    /* Heatmap, Donut, Scatter, Stacked â€” unchanged */
    const specHeatmap = {...};
    const specDonut = {...};
    const specScatter = {...};
    const specStacked = {...};

    vegaEmbed("#map1", specMap1, embedOpts);
    vegaEmbed("#map2", specMap2, embedOpts);
    vegaEmbed("#deaths", specDeaths, embedOpts);
    vegaEmbed("#heatmap", specHeatmap, embedOpts);
    vegaEmbed("#donut", specDonut, embedOpts);
    vegaEmbed("#scatter", specScatter, embedOpts);
    vegaEmbed("#stacked", specStacked, embedOpts);
  </script>
</body>
</html>
