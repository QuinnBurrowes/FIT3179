<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Australian Health and Lifestyle Visualisations</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
  <style>
    body {
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: #fafafa;
      margin: 18px;
      color: #111827;
      text-align: center;
    }

    h1 {
      text-align: center;
      margin-bottom: 8px;
      font-weight: 600;
    }

    .lead {
      margin-bottom: 28px;
      font-size: 15px;
      color: #374151;
    }

    .top-row {
      display: flex;
      gap: 32px; /* more space between maps */
      justify-content: center;
      align-items: flex-start;
      flex-wrap: wrap;
      margin-bottom: 8px;
    }

    .map-card {
      background: #fff;
      border-radius: 8px;
      box-shadow: 0 6px 18px rgba(15,23,42,0.06);
      padding: 12px;
      width: 680px;
      box-sizing: border-box;
    }

    .text-section {
      max-width: 1380px;
      margin: 0 auto;
      margin-bottom: 40px;
      color: #374151;
      font-size: 15px;
      line-height: 1.5;
    }

    .chart-row {
      display: flex;
      justify-content: center;
      gap: 60px; /* wider horizontal gap between heatmap and donut */
      flex-wrap: wrap;
      margin-top: 20px;
    }

    .chart-card {
      background: #fff;
      border-radius: 8px;
      box-shadow: 0 6px 18px rgba(15,23,42,0.06);
      padding: 12px;
    }

    .caption {
      margin-top: 8px;
      font-size: 13px;
      color: #374151;
    }
  </style>
</head>
<body>
  <h1>Physical, Mental, and Combined Health Patterns in Australia</h1>
  <p class="lead">
    Visual exploration of physical and mental health indicators across Australian states and age groups.  
    Data sources: ABS (National Health Survey 2022) and AIHW.
  </p>

  <!-- CATEGORY 1: NATIONAL OVERVIEW -->
  <h2>1. National Overview</h2>
  <div class="top-row">
    <div class="map-card">
      <div id="map1"></div>
      <div class="caption">Map A — Prevalence of mental health conditions by state.</div>
    </div>

    <div class="map-card">
      <div id="map2"></div>
      <div class="caption">Map B — Proportion meeting physical activity guidelines by state.</div>
    </div>
  </div>

  <div class="text-section">
    These maps highlight how health outcomes vary geographically.  
    Mental health conditions are more prevalent in some regions, whereas adherence to physical activity 
    recommendations tends to be higher in southern states. The contrast suggests possible regional
    differences in wellbeing, lifestyle, and access to healthcare.
  </div>

  <div class="chart-row">
    <div class="chart-card" id="heatmap"></div>
    <div class="chart-card" id="donut"></div>
  </div>

  <div class="text-section">
    The left heatmap shows how different age groups meet fruit and vegetable intake recommendations, 
    while the donut chart shows physical activity levels across age groups. 
    Younger Australians are less likely to meet dietary and exercise guidelines than older adults.
  </div>

  <script>
    // ====== MAP 1 (Mental health) ======
    const specMap1 = {
      "$schema":"https://vega.github.io/schema/vega-lite/v5.json",
      "width":680, "height":420,
      "projection":{"type":"mercator","center":[134,-28],"scale":600},
      "layer":[
        {"data":{"graticule":{"step":[30,30]}}, "mark":{"type":"geoshape","stroke":"#ddd","strokeWidth":0.4}},
        {
          "data":{"url":"https://raw.githubusercontent.com/tonywr71/GeoJson-Data/master/australian-states.json","format":{"type":"json","property":"features"}},
          "transform":[{"lookup":"properties.STATE_NAME","from":{"data":{"url":"https://raw.githubusercontent.com/QuinnBurrowes/FIT3179/main/mental_state_real.csv"},"key":"STATE_NAME","fields":["value"]}}],
          "mark":{"type":"geoshape","stroke":"white","strokeWidth":1},
          "encoding":{
            "color":{"field":"value","type":"quantitative","title":"% adults (mental)","scale":{"scheme":"blues"},"legend":{"orient":"left"}},
            "tooltip":[{"field":"properties.STATE_NAME","title":"State"},{"field":"value","title":"% adults (mental)"}]
          }
        }
      ],
      "config":{"view":{"stroke":"transparent"}}
    };

    // ====== MAP 2 (Physical health) ======
    const specMap2 = {
      "$schema":"https://vega.github.io/schema/vega-lite/v5.json",
      "width":680, "height":420,
      "projection":{"type":"mercator","center":[134,-28],"scale":600},
      "layer":[
        {"data":{"graticule":{"step":[30,30]}}, "mark":{"type":"geoshape","stroke":"#ddd","strokeWidth":0.4}},
        {
          "data":{"url":"https://raw.githubusercontent.com/tonywr71/GeoJson-Data/master/australian-states.json","format":{"type":"json","property":"features"}},
          "transform":[{"lookup":"properties.STATE_NAME","from":{"data":{"url":"https://raw.githubusercontent.com/QuinnBurrowes/FIT3179/main/physical_state.csv"},"key":"STATE_NAME","fields":["value"]}}],
          "mark":{"type":"geoshape","stroke":"white","strokeWidth":1},
          "encoding":{
            "color":{"field":"value","type":"quantitative","title":"% adults (physical)","scale":{"scheme":"greens"}},
            "tooltip":[{"field":"properties.STATE_NAME","title":"State"},{"field":"value","title":"% adults (physical)"}]
          }
        }
      ],
      "config":{"view":{"stroke":"transparent"}}
    };

    // ====== HEATMAP ======
    const specHeatmap = {
      "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
      "title": "Proportion Meeting Dietary Recommendations by Age Group (2022)",
      "data": {"url": "https://raw.githubusercontent.com/QuinnBurrowes/FIT3179/refs/heads/main/fruit_veg_data.csv"},
      "width": 400, "height": 240,
      "mark": "rect",
      "encoding": {
        "x": {"field": "AgeGroup", "type": "ordinal", "sort": ["18-24","25-34","35-44","45-54","55-64","65-74","75 years and over"],"axis": {"title": "Age Group"}},
        "y": {"field": "RecommendationType", "type": "nominal","sort": ["Fruit", "Vegetable", "Both"],"axis": {"title": "Recommendation Type"}},
        "color": {"field": "MetPercent", "type": "quantitative","title": "Percent meeting recommendation (%)","scale": {"scheme": "yellowgreenblue"}},
        "tooltip": [{"field": "AgeGroup"},{"field": "RecommendationType"},{"field": "MetPercent","title": "Percent (%)"}]
      },
      "config": {"view": {"stroke": "transparent"}}
    };

    // ====== DONUT ======
    const specDonut = {
      "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
      "title": "Weekly Physical Activity Levels by Age Group (2022)",
      "data": {"url": "https://raw.githubusercontent.com/QuinnBurrowes/FIT3179/refs/heads/main/physical_activity_final.csv"},
      "params": [{"name": "ageSelect","value": "15-17","bind": {"input": "select","options": ["15-17","18-24","25-34","35-44","45-54","55-64","65+"],"name": "Select Age Group: "}}],
      "transform": [{"filter": "datum.Age_Group == ageSelect"}],
      "width": 360, "height": 320,
      "mark": {"type": "arc", "innerRadius": 70},
      "encoding": {
        "theta": {"field": "Proportion", "type": "quantitative"},
        "color": {"field": "Minutes_Category","type": "nominal","scale": {"domain": ["0 minutes", "1-149 minutes", "150-299 minutes", "300+ minutes"],"range": ["#d73027", "#fc8d59", "#fee090", "#1a9850"]},"legend": {"title": "Minutes per Week"}},
        "tooltip": [{"field": "Age_Group","title": "Age Group"},{"field": "Minutes_Category","title": "Minutes per Week"},{"field": "Proportion","title": "Proportion (%)"}]
      },
      "config": {"view": {"stroke": null},"legend": {"orient": "right"}}
    };

    const opts = {actions: false};
    vegaEmbed('#map1', specMap1, opts);
    vegaEmbed('#map2', specMap2, opts);
    vegaEmbed('#heatmap', specHeatmap, opts);
    vegaEmbed('#donut', specDonut, opts);
  </script>
</body>
</html>
