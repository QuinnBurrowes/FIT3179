<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Australian Health and Lifestyle Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
    <style>
      body {
        font-family: "Segoe UI", Roboto, sans-serif;
        margin: 40px;
        background-color: #fdfdfd;
        color: #222;
      }
      h1 {
        text-align: center;
        margin-bottom: 50px;
      }
      h2 {
        border-bottom: 2px solid #ccc;
        padding-bottom: 6px;
        margin-top: 60px;
      }
      .section {
        margin-bottom: 80px;
      }
      .viz-row {
        display: flex;
        justify-content: center;
        align-items: flex-start;
        gap: 120px; /* wider horizontal space */
        flex-wrap: wrap;
        margin-top: 30px;
        margin-bottom: 30px;
      }
      .chart {
        flex: 1 1 500px;
        min-width: 400px;
        text-align: center;
      }
      p {
        max-width: 900px;
        margin: 10px auto;
        line-height: 1.6;
      }
    </style>
  </head>
  <body>
    <h1>Australian Health and Lifestyle Dashboard</h1>

    <!-- Section 1 -->
    <div class="section">
      <h2>National and State Health Overview</h2>
      <div class="viz-row">
        <div id="map1" class="chart"></div>
        <div id="map2" class="chart"></div>
      </div>
      <p>
        These maps illustrate variations in physical activity and obesity prevalence across Australian states. 
        The left map highlights the proportion of adults meeting physical activity guidelines, 
        while the right map shows the percentage classified as overweight or obese. 
        Clear spatial patterns emerge, with higher obesity levels tending to coincide with lower activity rates.
      </p>
      <div id="deaths" class="chart"></div>
    </div>

    <!-- Section 2 -->
    <div class="section">
      <h2>Nutrition and Physical Activity by Age Group</h2>
      <div class="viz-row">
        <div id="heatmap" class="chart"></div>
        <div id="donut" class="chart"></div>
      </div>
      <p>
        The heatmap on the left explores how fruit and vegetable consumption changes with age, 
        while the donut chart summarises physical activity levels by age group. 
        Together, these reveal lifestyle trends that contribute to national health outcomes.
      </p>
    </div>

    <!-- Section 3 -->
    <div class="section">
      <h2>Physical Activity and Mental Health</h2>
      <div class="viz-row">
        <div id="scatter" class="chart"></div>
        <div id="distress" class="chart"></div>
      </div>
      <p>
        The scatter plot demonstrates the relationship between meeting physical activity guidelines 
        and experiencing high levels of psychological distress across different age groups. 
        The stacked bar charts show the distribution of distress levels among males and females, 
        providing a deeper look at mental wellbeing disparities across the population.
      </p>
    </div>

    <script>
      // --- Section 1 ---
      vegaEmbed("#map1", "https://raw.githubusercontent.com/QuinnBurrowes/FIT3179/main/physical_activity_map.json");
      vegaEmbed("#map2", "https://raw.githubusercontent.com/QuinnBurrowes/FIT3179/main/obesity_map.json");
      vegaEmbed("#deaths", "https://raw.githubusercontent.com/QuinnBurrowes/FIT3179/main/causes_of_death_chart.json");

      // --- Section 2 ---
      vegaEmbed("#heatmap", "https://raw.githubusercontent.com/QuinnBurrowes/FIT3179/main/fruit_veg_heatmap.json");
      vegaEmbed("#donut", "https://raw.githubusercontent.com/QuinnBurrowes/FIT3179/main/activity_donut.json");

      // --- Section 3 ---
      const scatterSpec = {
        "$schema":"https://vega.github.io/schema/vega-lite/v5.json",
        "width": 680,
        "height": 380,
        "data":{"url":"https://raw.githubusercontent.com/QuinnBurrowes/FIT3179/main/activity_vs_distress.csv"},
        "mark":{"type":"point","filled":true,"size":140},
        "encoding":{
          "x":{"field":"Activity_Met","type":"quantitative","title":"% meeting activity guidelines"},
          "y":{"field":"Distress_High","type":"quantitative","title":"% high/very high distress"},
          "color":{"field":"Age_Group","type":"nominal"},
          "tooltip":[
            {"field":"Age_Group"},{"field":"Activity_Met","title":"% Active"},{"field":"Distress_High","title":"% High Distress"}
          ]
        },
        "config":{"view":{"stroke":"transparent"}}
      };

      const distressSpec = {
        "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
        "description": "Stacked bars: Percent distress-level by AgeGroup, by Sex.",
        "data": {
          "url": "https://raw.githubusercontent.com/QuinnBurrowes/FIT3179/refs/heads/main/psychological_distress.csv",
          "format": {"type": "csv"}
        },
        "width": 320,
        "height": 260,
        "title": "Distribution of Distress Level by Age Group (percent) — Males vs Females",
        "transform": [
          {"filter": {"field": "Sex", "oneOf": ["Males", "Females"]}},
          {"calculate": "toNumber(datum.Percent)", "as": "PercentNum"},
          {
            "calculate": "datum.DistressLevel == 'Low distress level' ? 1 : datum.DistressLevel == 'Moderate distress level' ? 2 : datum.DistressLevel == 'High distress level' ? 3 : 4",
            "as": "DistressRank"
          }
        ],
        "facet": {
          "column": {
            "field": "Sex",
            "type": "nominal",
            "sort": ["Males", "Females"],
            "header": {"labelAngle": 0, "title": null}
          }
        },
        "spec": {
          "mark": {"type": "bar", "cornerRadiusEnd": 2},
          "encoding": {
            "y": {
              "field": "AgeGroup",
              "type": "ordinal",
              "sort": {
                "domain": [
                  "18–24",
                  "25–34",
                  "35–44",
                  "45–54",
                  "55–64",
                  "65 years and over"
                ]
              },
              "axis": {"title": null}
            },
            "x": {
              "field": "PercentNum",
              "type": "quantitative",
              "stack": "zero",
              "axis": {"title": "Percent (%)"}
            },
            "color": {
              "field": "DistressLevel",
              "type": "nominal",
              "scale": {
                "domain": [
                  "Low distress level",
                  "Moderate distress level",
                  "High distress level",
                  "Very high distress level"
                ],
                "range": ["#4daf4a", "#377eb8", "#ff7f00", "#e41a1c"]
              },
              "legend": {"title": "Distress level", "orient": "right"}
            },
            "order": {
              "field": "DistressRank",
              "type": "quantitative",
              "sort": "ascending"
            },
            "tooltip": [
              {"field": "Sex", "type": "nominal"},
              {"field": "AgeGroup", "type": "nominal"},
              {"field": "DistressLevel", "type": "nominal"},
              {"field": "PercentNum", "type": "quantitative", "title": "Percent"}
            ]
          }
        },
        "resolve": {"legend": {"color": "shared"}}
      };

      vegaEmbed("#scatter", scatterSpec);
      vegaEmbed("#distress", distressSpec);
    </script>
  </body>
</html>
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Australian Health and Lifestyle Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
    <style>
      body {
        font-family: "Segoe UI", Roboto, sans-serif;
        margin: 40px;
        background-color: #fdfdfd;
        color: #222;
      }
      h1 {
        text-align: center;
        margin-bottom: 50px;
      }
      h2 {
        border-bottom: 2px solid #ccc;
        padding-bottom: 6px;
        margin-top: 60px;
      }
      .section {
        margin-bottom: 80px;
      }
      .viz-row {
        display: flex;
        justify-content: center;
        align-items: flex-start;
        gap: 120px; /* wider horizontal space */
        flex-wrap: wrap;
        margin-top: 30px;
        margin-bottom: 30px;
      }
      .chart {
        flex: 1 1 500px;
        min-width: 400px;
        text-align: center;
      }
      p {
        max-width: 900px;
        margin: 10px auto;
        line-height: 1.6;
      }
    </style>
  </head>
  <body>
    <h1>Australian Health and Lifestyle Dashboard</h1>

    <!-- Section 1 -->
    <div class="section">
      <h2>National and State Health Overview</h2>
      <div class="viz-row">
        <div id="map1" class="chart"></div>
        <div id="map2" class="chart"></div>
      </div>
      <p>
        These maps illustrate variations in physical activity and obesity prevalence across Australian states. 
        The left map highlights the proportion of adults meeting physical activity guidelines, 
        while the right map shows the percentage classified as overweight or obese. 
        Clear spatial patterns emerge, with higher obesity levels tending to coincide with lower activity rates.
      </p>
      <div id="deaths" class="chart"></div>
    </div>

    <!-- Section 2 -->
    <div class="section">
      <h2>Nutrition and Physical Activity by Age Group</h2>
      <div class="viz-row">
        <div id="heatmap" class="chart"></div>
        <div id="donut" class="chart"></div>
      </div>
      <p>
        The heatmap on the left explores how fruit and vegetable consumption changes with age, 
        while the donut chart summarises physical activity levels by age group. 
        Together, these reveal lifestyle trends that contribute to national health outcomes.
      </p>
    </div>

    <!-- Section 3 -->
    <div class="section">
      <h2>Physical Activity and Mental Health</h2>
      <div class="viz-row">
        <div id="scatter" class="chart"></div>
        <div id="distress" class="chart"></div>
      </div>
      <p>
        The scatter plot demonstrates the relationship between meeting physical activity guidelines 
        and experiencing high levels of psychological distress across different age groups. 
        The stacked bar charts show the distribution of distress levels among males and females, 
        providing a deeper look at mental wellbeing disparities across the population.
      </p>
    </div>

    <script>
      // --- Section 1 ---
      vegaEmbed("#map1", "https://raw.githubusercontent.com/QuinnBurrowes/FIT3179/main/physical_activity_map.json");
      vegaEmbed("#map2", "https://raw.githubusercontent.com/QuinnBurrowes/FIT3179/main/obesity_map.json");
      vegaEmbed("#deaths", "https://raw.githubusercontent.com/QuinnBurrowes/FIT3179/main/causes_of_death_chart.json");

      // --- Section 2 ---
      vegaEmbed("#heatmap", "https://raw.githubusercontent.com/QuinnBurrowes/FIT3179/main/fruit_veg_heatmap.json");
      vegaEmbed("#donut", "https://raw.githubusercontent.com/QuinnBurrowes/FIT3179/main/activity_donut.json");

      // --- Section 3 ---
      const scatterSpec = {
        "$schema":"https://vega.github.io/schema/vega-lite/v5.json",
        "width": 680,
        "height": 380,
        "data":{"url":"https://raw.githubusercontent.com/QuinnBurrowes/FIT3179/main/activity_vs_distress.csv"},
        "mark":{"type":"point","filled":true,"size":140},
        "encoding":{
          "x":{"field":"Activity_Met","type":"quantitative","title":"% meeting activity guidelines"},
          "y":{"field":"Distress_High","type":"quantitative","title":"% high/very high distress"},
          "color":{"field":"Age_Group","type":"nominal"},
          "tooltip":[
            {"field":"Age_Group"},{"field":"Activity_Met","title":"% Active"},{"field":"Distress_High","title":"% High Distress"}
          ]
        },
        "config":{"view":{"stroke":"transparent"}}
      };

      const distressSpec = {
        "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
        "description": "Stacked bars: Percent distress-level by AgeGroup, by Sex.",
        "data": {
          "url": "https://raw.githubusercontent.com/QuinnBurrowes/FIT3179/refs/heads/main/psychological_distress.csv",
          "format": {"type": "csv"}
        },
        "width": 320,
        "height": 260,
        "title": "Distribution of Distress Level by Age Group (percent) — Males vs Females",
        "transform": [
          {"filter": {"field": "Sex", "oneOf": ["Males", "Females"]}},
          {"calculate": "toNumber(datum.Percent)", "as": "PercentNum"},
          {
            "calculate": "datum.DistressLevel == 'Low distress level' ? 1 : datum.DistressLevel == 'Moderate distress level' ? 2 : datum.DistressLevel == 'High distress level' ? 3 : 4",
            "as": "DistressRank"
          }
        ],
        "facet": {
          "column": {
            "field": "Sex",
            "type": "nominal",
            "sort": ["Males", "Females"],
            "header": {"labelAngle": 0, "title": null}
          }
        },
        "spec": {
          "mark": {"type": "bar", "cornerRadiusEnd": 2},
          "encoding": {
            "y": {
              "field": "AgeGroup",
              "type": "ordinal",
              "sort": {
                "domain": [
                  "18–24",
                  "25–34",
                  "35–44",
                  "45–54",
                  "55–64",
                  "65 years and over"
                ]
              },
              "axis": {"title": null}
            },
            "x": {
              "field": "PercentNum",
              "type": "quantitative",
              "stack": "zero",
              "axis": {"title": "Percent (%)"}
            },
            "color": {
              "field": "DistressLevel",
              "type": "nominal",
              "scale": {
                "domain": [
                  "Low distress level",
                  "Moderate distress level",
                  "High distress level",
                  "Very high distress level"
                ],
                "range": ["#4daf4a", "#377eb8", "#ff7f00", "#e41a1c"]
              },
              "legend": {"title": "Distress level", "orient": "right"}
            },
            "order": {
              "field": "DistressRank",
              "type": "quantitative",
              "sort": "ascending"
            },
            "tooltip": [
              {"field": "Sex", "type": "nominal"},
              {"field": "AgeGroup", "type": "nominal"},
              {"field": "DistressLevel", "type": "nominal"},
              {"field": "PercentNum", "type": "quantitative", "title": "Percent"}
            ]
          }
        },
        "resolve": {"legend": {"color": "shared"}}
      };

      vegaEmbed("#scatter", scatterSpec);
      vegaEmbed("#distress", distressSpec);
    </script>
  </body>
</html>
